中山大学数据科学与计算机学院本科生实验报告
（2019年秋季学期）
	课程名称：区块链原理与技术						任课教师： 郑子彬
年级	17级	专业（方向）	软件工程
学号	17343108	姓名	王然
电话	13246820667	Email	923206599@qq.com
开始日期	2019.12.10	完成日期	2019.12.13
一、	项目背景
基于已有的开源区 块 链 系 统 FISCO-BCOS，以联盟链为主，开发基于区块链或区块链智能合约的供应链金融平台，实现供应链应收账款资产的溯源、流转。
传统供应链金融： 
某车企（宝马）因为其造车技术特别牛，消费者口碑好，所以其在同行业中占据绝对优势地位。因此，在金融机构（银行）对该车企的信用评级将很高，认为他有很大的风险承担的能力。在某次交易中，该车企从轮胎公司购买了一批轮胎，但由于资金暂时短缺向轮胎公司签订了 1000 万的应收账款单据，承诺 1 年后归还轮胎公司 1000 万。这个过程可以拉上金融机构例如银行来对这笔交易作见证，确认这笔交易的真实性。在接下里的几个月里，轮胎公司因为资金短缺需要融资，这个时候它可以凭借跟某车企签订的应收账款单据向金融结构借款，金融机构认可该车企（核心企业）的还款能力，因此愿意借款给轮胎公司。但是，这样的信任关系并不会往下游传递。在某个交易中，轮胎公司从轮毂公司购买了一批轮毂，但由于租金暂时短缺向轮胎公司签订了500万的应收账款单据，承诺1年后归还轮胎公司500万。当轮毂公司想利用这个应收账款单据向金融机构借款融资的时候，金融机构因为不认可轮胎公司的还款能力，需要对轮胎公司进行详细的信用分析以评估其还款能力同时验证应收账款单据的真实性，才能决定是否借款给轮毂公司。这个过程将增加很多经济成本，而这个问题主要是由于该车企的信用无法在整个供应链中传递以及交易信息不透明化所导致的。 
区块链+供应链金融： 
 将供应链上的每一笔交易和应收账款单据上链，同时引入第三方可信机构来确认这些信息的交易，例如银行，物流公司等，确保交易和单据的真实性。同时，支持应收账款的转让，融资，清算等，让核心企业的信用可以传递到供应链的下游企业，减小中小企业的融资难度。
二、	方案设计
存储设计、数据流图、核心功能介绍（文字+代码）
数据流图示例：
 
合约内部使用一个Receipt结构体来记录收据，每个收据为结构体Receipt储存收据的金额、收据编号、收据的发出方（借方）、收据的接收方（贷方）。结构体Receipt如下：

 
核心功能：
1. 实现采购商品—签发应收账款
  
该功能将用于记录一方向另一方借钱后提供的收据信息。

2. 实现应收账款的转让
 
当收据1为A公司借给B公司m元，收据2为B公司借给C公司n元（m>n）时，该功能将使得收据1变为B公司欠A公司（m-n）元，收据2变为C公司欠A公司n元。

3. 利用应收账款向银行融资
 
当某公司要向银行融资时，更新资产余额。


4.应收账款支付结算
 当收据中的欠款方进行债务偿还后，对双方的资产进行更新。 
三、	功能测试
在VirtualBox中启动webase
先输入指令cd webase-deploy/，进入webase-deploy文件中。接下来执行python deploy.py installAll指令，以启动webase。
   		可以看到webase已经成功启动。											输入localhost:5000进入webase的网站。
四个私钥用户的创建如下：
 
在网站中部署合约project.sol，部署好合约之后开始分别实现四个功能。
功能一：实现采购商品—签发应收账款交易上链。

轮胎厂向车企借100：
  

查看交易1的收据：
 
查看车企的balance
 
功能二：实现应收账款的转让上链，轮胎公司从轮毂公司购买一笔轮毂，便将于车企的应收账款单据部分转让给轮毂公司。轮毂公司可以利用这个新的单据去融资或者要求车企到期时归还钱款。

车企借给轮胎厂100，轮毂厂借给车企50，最终转换成车企借给轮胎厂50,、轮毂厂借给轮胎厂50。
先进行轮毂厂借给车企50的交易：
 

交易内容如下：
 

交易4的收据如下：
 
然后进行功能二（收据转让）的检验：
 

交易内容如下：
 

查看收据：
 
 
功能二实现。

功能三：利用应收账款向银行融资上链，供应链上所有可以利用应收账款单据向银行申请融资。

对车企进行融资：
 

交易内容：
 

查询车企的账户：
 
 
车企原本借出50，现在融资回来50一共为0，功能三实现。

功能四：应收账款支付结算上链，应收账款单据到期时核心企业向下游企业支付相应的欠款。

在收据1中，轮胎厂欠车企50
 

然后对车企的账户进行查询：
 

发现欠的钱已经还清了：
 
功能四实现。

四、	心得体会
这次作业主要就是对区块链的应用进行实践，发现了区块链原来有这样意想不到的作用，在我们的生活中与我们时刻紧密相连、密不可分。区块链的存在优化了我们的生活，为我们的生活提供了更多的便利。区块链的未来目前来看是很光明的，是有着无限的未来的，而本学期的课程也让我对区块链有了一个最基本的认识，收获良多。


